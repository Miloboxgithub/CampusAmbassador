{"version":3,"file":"search.js","sources":["pkgA/search/search.vue","../../../../../HBuilderX.4.15.2024050802/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGtnQVxzZWFyY2hcc2VhcmNoLnZ1ZQ"],"sourcesContent":["<template>\r\n  <loading :show=\"isLoading\"></loading>\r\n  <scroll-view class=\"page-container\" scroll-y=\"true\">\r\n    <!-- 搜索栏 -->\r\n    <view class=\"theme\">搜索</view>\r\n    <view style=\"display: flex; justify-content: center; margin-top: 105px\">\r\n      <view class=\"navv\">\r\n        <view class=\"search\">\r\n          <image @click=\"inputed\" src=\"../img/搜索.png\" mode=\"\" />\r\n        </view>\r\n        <view class=\"fancy-bg\"></view>\r\n        <input\r\n          type=\"text\"\r\n          @confirm=\"inputed\"\r\n          class=\"input\"\r\n          :placeholder=\"contents\"\r\n          auto-focus=\"true\"\r\n          v-model=\"msg\"\r\n          id=\"search\"\r\n        />\r\n        <image\r\n          class=\"guan\"\r\n          src=\"../img/cha1.png\"\r\n          @click=\"clear\"\r\n          hover-stop-propagation=\"true\"\r\n          mode=\"\"\r\n        />\r\n      </view>\r\n    </view>\r\n    <view class=\"syl\" v-if=\"flag\"\r\n      >搜索历史\r\n      <image @click=\"shanchu\" class=\"shanchu\" src=\"../img/shachu.png\" mode=\"\" />\r\n    </view>\r\n    <view class=\"kuai\" v-if=\"flag\">\r\n      <view\r\n        class=\"items\"\r\n        v-for=\"(item, index) in items\"\r\n        :key=\"index\"\r\n        @click=\"shang\"\r\n        data-s=\"{{item}}\"\r\n      >\r\n        <text>{{ item }}</text>\r\n      </view>\r\n    </view>\r\n    <!-- <view class=\"screen\" @click=\"navs2\">\r\n\t\t\t<view> 筛选 </view>\r\n\t\t\t<img src=\"../../static/筛选@2x.png\" alt=\"\" />\r\n\t\t</view> -->\r\n    <view class=\"coitems\">\r\n      <view\r\n        class=\"item\"\r\n        v-for=\"item in coitems\"\r\n        :key=\"item.id\"\r\n        @click=\"navs3(item.id)\"\r\n      >\r\n        <view class=\"name\">{{ item.name }}</view>\r\n        <view class=\"tags\">\r\n          <view class=\"tag\" v-for=\"tag in item.tags\" :key=\"tag\">\r\n            {{ tag }}\r\n          </view>\r\n        </view>\r\n        <img class=\"icon\" src=\"../../static/行业@2x.png\" alt=\"\" />\r\n        <text class=\"type\">{{ item.type }}</text>\r\n        <text class=\"status\" :class=\"{ ended: item.status === '已结束' }\">{{\r\n          item.status\r\n        }}</text>\r\n        <view class=\"coicon\">\r\n          <img :src=\"item.coicon\" alt=\"aspectFit\" />\r\n        </view>\r\n        <img src=\"../../static/浏览@2x.png\" alt=\"\" class=\"eye\" />\r\n        <text class=\"look\">{{ item.look }}</text>\r\n      </view>\r\n      <!-- <view class=\"kong\">\r\n        <text>~已经到底啦~</text>\r\n      </view> -->\r\n    </view>\r\n  </scroll-view>\r\n  <view class=\"nono\" v-if=\"!flag\">\r\n    <image src=\"../img/搜索1.png\" mode=\"\" />\r\n    <text>\r\n      当前未找到与关键词相关的内容，建议您调整搜索词或尝试其他关键词。\r\n    </text>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch } from \"vue\";\r\nimport {\r\n  onShow,\r\n  onLoad,\r\n  onReachBottom,\r\n  onPullDownRefresh,\r\n  onShareAppMessage,\r\n} from \"@dcloudio/uni-app\";\r\nimport { getCampusByPage, getCampusDetail } from \"@/api/index.js\";\r\nimport { pageStore } from \"@/store\";\r\nimport Loading from \"../../components/Loading.vue\";\r\nconst isLoading = ref(false);\r\nconst pageInfo = pageStore();\r\nconst flag = ref(true);\r\nconst contents = ref(\"请输入搜索内容\");\r\nconst items = ref([]);\r\nconst coitems = ref([\r\n  //   {\r\n  //     id: 1,\r\n  //     name: \"振石控股集团有限公司\",\r\n  //     tags: [\"民营\", \"2000人以上\", \"校园大使\"],\r\n  //     type: \"汽车|机械|创造\",\r\n  //     status: \"招募中\",\r\n  //     coicon: \"https://picsum.photos/200\",\r\n  //     look: \"5000\",\r\n  //   },\r\n]);\r\nconst msg = ref(\"\");\r\nconst inputed = async (e) => {\r\n  console.log(msg.value);\r\n  if (msg.value === \"\") {\r\n    uni.showToast({\r\n      title: \"请输入搜索内容\",\r\n      icon: \"error\",\r\n    });\r\n    flag.value = true;\r\n    return;\r\n  }\r\n  // 1. 先删除已存在的\r\n  const idx = items.value.indexOf(msg.value);\r\n  if (idx > -1) items.value.splice(idx, 1);\r\n\r\n  // 2. 追加到末尾\r\n  items.value.push(msg.value);\r\n\r\n  // 3. 超过 10 条时删除最旧\r\n  if (items.value.length > 20) items.value.shift();\r\n\r\n  isLoading.value = true;\r\n  const res = await getCampusByPage({\r\n    page: 1,\r\n    pageSize: 100,\r\n    keyword: msg.value,\r\n  });\r\n  if (res.length === 0) {\r\n    coitems.value = [];\r\n    flag.value = false;\r\n    isLoading.value = false;\r\n    return;\r\n  }\r\n  flag.value = true;\r\n  // 清空之前的结果\r\n  coitems.value = [];\r\n  // 遍历结果并添加到 coitems\r\n  res.forEach((e) => {\r\n    coitems.value.push({\r\n      id: e.id,\r\n      name: e.name,\r\n      tags: [e.type, e.scale, \"校园大使\"],\r\n      type: e.industries,\r\n      status: e.isRecruit ? \"招募中\" : \"已结束\",\r\n      coicon: \"https://api.xydsh.cn/enterpriseLogo/\"+e.logo,\r\n      look: e.pageView,\r\n    });\r\n  });\r\n  isLoading.value = false;\r\n};\r\nconst clear = () => {\r\n  msg.value = \"\";\r\n  flag.value = true;\r\n};\r\nconst shang = (e) => {\r\n  console.log(e.currentTarget.dataset.s.a);\r\n  msg.value = e.currentTarget.dataset.s.a;\r\n  inputed();\r\n};\r\nconst shanchu = () => {\r\n  uni.showModal({\r\n    content: \"确定清除所有记录吗?\", // 对话框内容\r\n    showCancel: true, // 是否显示取消按钮\r\n    success: (res) => {\r\n      if (res.confirm) {\r\n        items.value = [];\r\n      } else if (res.cancel) {\r\n      }\r\n    },\r\n  });\r\n};\r\nwatch(\r\n  items,\r\n  (newVal) => {\r\n    uni.setStorageSync(\"myItems\", JSON.stringify(newVal));\r\n  },\r\n  { deep: true } // 数组内部变化也触发\r\n);\r\nonShow(() => {\r\n  // 页面显示时加载数据\r\n  const storedItems = uni.getStorageSync(\"myItems\");\r\n  if (storedItems) {\r\n    items.value = JSON.parse(storedItems);\r\n  }\r\n});\r\nonPullDownRefresh(async () => {\r\n  console.log(\"下拉刷新了\");\r\n  flag.value = true;\r\n  uni.stopPullDownRefresh();\r\n});\r\nconst navs3 = (id) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pkgA/detail/detail?id=${id}`,\r\n\t\t});\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.page-container {\r\n  background: linear-gradient(to bottom, #dbe8ff, #f5f5f5 50%);\r\n  backdrop-filter: blur(87px);\r\n  height: 100vh;\r\n  /* 使用视口高度确保填充整个页面 */\r\n  width: 100vw;\r\n  /* 使用视口宽度确保填充整个页面 */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.theme {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 53.79px;\r\n  width: 90px;\r\n  height: 27px;\r\n  opacity: 0.9;\r\n  /** 文本1 */\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  letter-spacing: 0px;\r\n  line-height: 26.06px;\r\n  color: rgba(0, 0, 0, 1);\r\n  text-align: center;\r\n  vertical-align: top;\r\n}\r\n\r\n.search {\r\n  margin-left: 2.5vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.search image {\r\n  height: 27px;\r\n  width: 27px;\r\n\r\n  margin-left: 5px;\r\n}\r\n\r\n.fancy-bg {\r\n  margin-left: 1vw;\r\n  width: 0.9px;\r\n  height: 17px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.input {\r\n  width: 70%;\r\n  margin-left: 25px;\r\n  margin-right: 50px;\r\n  font-size: 15px;\r\n  font-weight: 400;\r\n  letter-spacing: 1.5px;\r\n  line-height: 21.72px;\r\n  color: rgb(0, 0, 0) !important;\r\n  vertical-align: top;\r\n}\r\n\r\n.shanchu {\r\n  position: absolute;\r\n  width: 15px;\r\n  height: 16px;\r\n  opacity: 1;\r\n  right: 26px;\r\n  padding: 5px;\r\n}\r\n\r\n.navv {\r\n  width: 92vw;\r\n  height: 34px;\r\n  border-radius: 17px;\r\n  background: rgba(245, 245, 245, 1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.syl {\r\n  position: relative;\r\n  margin-top: 1vh;\r\n  margin-left: 7vw;\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  letter-spacing: 0.5px;\r\n  line-height: 21.72px;\r\n  color: rgba(56, 56, 56, 1);\r\n  vertical-align: top;\r\n}\r\n\r\n.kuai {\r\n  margin-left: 7vw;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.items {\r\n  margin-top: 1vh;\r\n  border-radius: 15px;\r\n  background: rgba(255, 255, 255, 1);\r\n  height: 24px;\r\n  border: 0.5px solid rgba(229, 229, 229, 1);\r\n  margin-right: 8px;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  letter-spacing: 0px;\r\n  line-height: 17.38px;\r\n  color: rgba(79, 79, 79, 1);\r\n  text-align: left;\r\n  vertical-align: top;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 1px 8px 1px 8px;\r\n}\r\n\r\n.items text {\r\n  margin-left: 3px;\r\n  margin-right: 3px;\r\n}\r\n\r\n.nono image {\r\n  position: absolute;\r\n\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 30%;\r\n  width: 66px;\r\n  height: 68.2px;\r\n  opacity: 1;\r\n}\r\n\r\n.nono text {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 40%;\r\n  width: 221px;\r\n  height: 38px;\r\n  opacity: 1;\r\n  /** 文本1 */\r\n  font-size: 13px;\r\n  font-weight: 400;\r\n  letter-spacing: 0px;\r\n  line-height: 18.82px;\r\n  color: rgba(128, 128, 128, 1);\r\n  text-align: justify;\r\n  vertical-align: top;\r\n}\r\n\r\n.guan {\r\n  \r\n  right: 20px;\r\n  z-index: 100;\r\n  width: 18.5px;\r\n  height: 18.5px;\r\n  padding: 10px;\r\n  opacity: 1;\r\n  z-index: 1000;\r\n}\r\n.coitems {\r\n  margin-top: 20px;\r\n  width: 100vw;\r\n  height: auto;\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.item {\r\n  position: relative;\r\n  width: 90%;\r\n  margin-left: 5%;\r\n  height: 112px;\r\n  opacity: 1;\r\n  border-radius: 15px;\r\n  background: rgba(255, 255, 255, 1);\r\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.05);\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.kong {\r\n  width: 100vw;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n  font-weight: 400;\r\n  color: rgb(143, 141, 141);\r\n}\r\n\r\n.name {\r\n  position: absolute;\r\n  left: 18px;\r\n  top: 13px;\r\n\r\n  opacity: 1;\r\n  /** 文本1 */\r\n  font-size: 14px;\r\n  font-weight: 700;\r\n  letter-spacing: 0px;\r\n  line-height: 20.27px;\r\n  color: rgba(56, 56, 56, 1);\r\n  text-align: left;\r\n  vertical-align: top;\r\n}\r\n\r\n.tags {\r\n  position: absolute;\r\n  left: 18px;\r\n  top: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.tags > .tag:nth-child(1) {\r\n  background: rgba(255, 224, 194, 1);\r\n  color: rgba(212, 106, 0, 1);\r\n}\r\n\r\n.tags > .tag:nth-child(2) {\r\n  background: rgba(249, 255, 194, 1);\r\n  color: rgba(166, 184, 11, 1);\r\n}\r\n\r\n.tags > .tag:nth-child(3) {\r\n  background: rgba(255, 224, 254, 1);\r\n  color: rgba(176, 33, 171, 1);\r\n}\r\n\r\n.tag {\r\n  margin-right: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0.5px 7px;\r\n  height: 14px;\r\n  opacity: 1;\r\n  border-radius: 5px;\r\n  font-size: 11px;\r\n  font-weight: 500;\r\n  letter-spacing: 0px;\r\n  line-height: 15.93px;\r\n  text-align: center;\r\n  vertical-align: top;\r\n}\r\n\r\n.icon {\r\n  position: absolute;\r\n  left: 18px;\r\n  top: 62px;\r\n  width: 12px;\r\n  height: 12px;\r\n}\r\n\r\n.type {\r\n  font-size: 11px;\r\n  font-weight: 400;\r\n  letter-spacing: 0px;\r\n  line-height: 15.93px;\r\n  color: rgba(56, 56, 56, 1);\r\n  text-align: left;\r\n  vertical-align: top;\r\n  position: absolute;\r\n  left: 37px;\r\n  top: 60px;\r\n}\r\n\r\n.status {\r\n  position: absolute;\r\n  left: 18px;\r\n  bottom: 10px;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  letter-spacing: 0px;\r\n  line-height: 15.83px;\r\n  color: rgba(77, 100, 179, 1);\r\n  text-align: left;\r\n  vertical-align: top;\r\n}\r\n\r\n.coicon {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 12px;\r\n  width: 63px;\r\n  height: 63px;\r\n  opacity: 1;\r\n  border-radius: 10px;\r\n  background: rgba(255, 255, 255, 1);\r\n  border: 1px solid rgba(166, 166, 166, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n\r\n.coicon image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.eye {\r\n  width: 16px;\r\n  height: 16px;\r\n  position: absolute;\r\n  right: 48px;\r\n  bottom: 13px;\r\n}\r\n\r\n.look {\r\n  font-size: 8px;\r\n  font-weight: 400;\r\n  letter-spacing: 0px;\r\n  line-height: 11.58px;\r\n  color: rgba(56, 56, 56, 0.86);\r\n  text-align: left;\r\n  vertical-align: top;\r\n  position: absolute;\r\n  right: 26px;\r\n  bottom: 15px;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/86158/Documents/HBuilderProjects/CampusAmbassador/pkgA/search/search.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","pageStore","uni","getCampusByPage","e","watch","onShow","onPullDownRefresh"],"mappings":";;;;;;;;AAgGA,MAAA,UAAA,MAAA;;;;AACA,UAAA,YAAAA,cAAAA,IAAA,KAAA;AACAC,gBAAAA,UAAA;AACA,UAAA,OAAAD,cAAAA,IAAA,IAAA;AACA,UAAA,WAAAA,cAAAA,IAAA,SAAA;AACA,UAAA,QAAAA,cAAAA,IAAA,CAAA,CAAA;AACA,UAAA,UAAAA,cAAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAUA,CAAA;AACA,UAAA,MAAAA,cAAAA,IAAA,EAAA;AACA,UAAA,UAAA,OAAA,MAAA;AACAE,oBAAA,MAAA,MAAA,OAAA,iCAAA,IAAA,KAAA;AACA,UAAA,IAAA,UAAA,IAAA;AACAA,sBAAAA,MAAA,UAAA;AAAA,UACA,OAAA;AAAA,UACA,MAAA;AAAA,QACA,CAAA;AACA,aAAA,QAAA;AACA;AAAA,MACA;AAEA,YAAA,MAAA,MAAA,MAAA,QAAA,IAAA,KAAA;AACA,UAAA,MAAA;AAAA,cAAA,MAAA,OAAA,KAAA,CAAA;AAGA,YAAA,MAAA,KAAA,IAAA,KAAA;AAGA,UAAA,MAAA,MAAA,SAAA;AAAA,cAAA,MAAA;AAEA,gBAAA,QAAA;AACA,YAAA,MAAA,MAAAC,0BAAA;AAAA,QACA,MAAA;AAAA,QACA,UAAA;AAAA,QACA,SAAA,IAAA;AAAA,MACA,CAAA;AACA,UAAA,IAAA,WAAA,GAAA;AACA,gBAAA,QAAA;AACA,aAAA,QAAA;AACA,kBAAA,QAAA;AACA;AAAA,MACA;AACA,WAAA,QAAA;AAEA,cAAA,QAAA;AAEA,UAAA,QAAA,CAAAC,OAAA;AACA,gBAAA,MAAA,KAAA;AAAA,UACA,IAAAA,GAAA;AAAA,UACA,MAAAA,GAAA;AAAA,UACA,MAAA,CAAAA,GAAA,MAAAA,GAAA,OAAA,MAAA;AAAA,UACA,MAAAA,GAAA;AAAA,UACA,QAAAA,GAAA,YAAA,QAAA;AAAA,UACA,QAAA,yCAAAA,GAAA;AAAA,UACA,MAAAA,GAAA;AAAA,QACA,CAAA;AAAA,MACA,CAAA;AACA,gBAAA,QAAA;AAAA,IACA;AACA,UAAA,QAAA,MAAA;AACA,UAAA,QAAA;AACA,WAAA,QAAA;AAAA,IACA;AACA,UAAA,QAAA,CAAA,MAAA;AACAF,0BAAA,MAAA,OAAA,iCAAA,EAAA,cAAA,QAAA,EAAA,CAAA;AACA,UAAA,QAAA,EAAA,cAAA,QAAA,EAAA;AACA;IACA;AACA,UAAA,UAAA,MAAA;AACAA,oBAAAA,MAAA,UAAA;AAAA,QACA,SAAA;AAAA;AAAA,QACA,YAAA;AAAA;AAAA,QACA,SAAA,CAAA,QAAA;AACA,cAAA,IAAA,SAAA;AACA,kBAAA,QAAA;UACA,WAAA,IAAA;AAAA;AAAA,QAEA;AAAA,MACA,CAAA;AAAA,IACA;AACAG,kBAAA;AAAA,MACA;AAAA,MACA,CAAA,WAAA;AACAH,sBAAA,MAAA,eAAA,WAAA,KAAA,UAAA,MAAA,CAAA;AAAA,MACA;AAAA,MACA,EAAA,MAAA,KAAA;AAAA;AAAA,IACA;AACAI,kBAAAA,OAAA,MAAA;AAEA,YAAA,cAAAJ,cAAAA,MAAA,eAAA,SAAA;AACA,UAAA,aAAA;AACA,cAAA,QAAA,KAAA,MAAA,WAAA;AAAA,MACA;AAAA,IACA,CAAA;AACAK,kBAAAA,kBAAA,YAAA;AACAL,oBAAAA,MAAA,MAAA,OAAA,iCAAA,OAAA;AACA,WAAA,QAAA;AACAA,oBAAA,MAAA,oBAAA;AAAA,IACA,CAAA;AACA,UAAA,QAAA,CAAA,OAAA;AACAA,oBAAAA,MAAA,WAAA;AAAA,QACA,KAAA,0BAAA,EAAA;AAAA,MACA,CAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9MA,GAAG,WAAW,eAAe;"}